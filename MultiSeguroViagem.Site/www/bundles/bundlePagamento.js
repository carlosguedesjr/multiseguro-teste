function addEventCardCredit(){$(".number").on("keyup",function(){number=mascaraCartaoCredito().val(),$(".cardCredit_number").text(number),selected_cardCredit=parseInt(number.substring(0,2))>50&&parseInt(number.substring(0,2))<56?0:4==parseInt(number.substring(0,1))?1:36==parseInt(number.substring(0,2))||39==parseInt(number.substring(0,2))||301==parseInt(number.substring(0,3))||305==parseInt(number.substring(0,3))?2:35==parseInt(number.substring(0,2))?3:60==parseInt(number.substring(0,2))?4:38==parseInt(number.substring(0,2))?5:-1,-1!=selected_cardCredit?(html.setAttribute("style","--cardCredit-color: "+cardCredits[selected_cardCredit].colore),""!=cardCredits[selected_cardCredit].src&&$(".bankid").attr("src",cardCredits[selected_cardCredit].src).show(),$(".hdnBandeira")[0]&&$(".hdnBandeira").val(cardCredits[selected_cardCredit].nome)):(html.setAttribute("style","--cardCredit-color: #cecece"),$(".bankid").attr("src","").hide(),$(".hdnBandeira")[0]&&$(".hdnBandeira").val("")),0===$(".cardCredit_number").text().length&&$(".cardCredit_number").html("&#x25CF;&#x25CF;&#x25CF;&#x25CF; &#x25CF;&#x25CF;&#x25CF;&#x25CF; &#x25CF;&#x25CF;&#x25CF;&#x25CF; &#x25CF;&#x25CF;&#x25CF;&#x25CF;")}).focus(function(){$(".cardCredit_number").css("color","white")}).on("keydown input",function(){number=mascaraCartaoCredito().val(),$(".cardCredit_number").text(number)}),$(".inputname").keyup(function(){return $(this).val($(this).val().toUpperCase()),$(".fullname").text($(this).val()),0===$(".inputname").val().length&&$(".fullname").text("NOME COMPLETO"),event.charCode}).focus(function(){$(".fullname").css("color","white")}),$(".ccv").focus(function(){$(".cardCredit").css("transform","rotatey(180deg)"),$(".seccode").css("color","white")}).keyup(function(){$(".seccode").text($(this).val()),0===$(this).val().length&&$(".seccode").html("&#x25CF;&#x25CF;&#x25CF;")}).focusout(function(){$(".cardCredit").css("transform","rotatey(0deg)"),$(".seccode").css("color","var(--text-color)")}),$(".expire").keydown(function(){}).keyup(function(e){$(".date_value").text($(this).val()),0===$(this).val().length&&$(".date_value").text("MM / AAAAA")}).focus(function(){$(".date_value").css("color","white")})}var cardCredits=[{nome:"Mastercard",colore:"#0061A8",src:"../www/img/cartoes/Mastercard-logo.png"},{nome:"Visa",colore:"#1c4671",src:"../www/img/cartoes/Visa-logo.png"},{nome:"Dinersclub",colore:"#888",src:"../www/img/cartoes/Diners-logo.png"},{nome:"Jcb",colore:"#108168",src:"../www/img/cartoes/JCB-logo.png"},{nome:"Hipercard",colore:"#b3131b",src:"../www/img/cartoes/Hipercard-logo.png"},{nome:"Generico",colore:"#696969",src:""}],month=0,html=document.getElementsByTagName("html")[0],number="",selected_cardCredit=-1;$(document).click(function(e){$(e.target).is(".ccv")&&$(e.target).closest(".ccv").length||($(".cardCredit").css("transform","rotatey(0deg)"),$(".seccode").css("color","var(--text-color)")),$(e.target).is(".expire")&&$(e.target).closest(".expire").length||$(".date_value").css("color","var(--text-color)"),$(e.target).is(".number")&&$(e.target).closest(".number").length||$(".cardCredit_number").css("color","var(--text-color)"),$(e.target).is(".inputname")&&$(e.target).closest(".inputname").length||$(".fullname").css("color","var(--text-color)")});
calculaDigitosCpf=function(a){if(s=a,isNaN(s))return!1;for(var t=!1,r=1,e=0;e<s.length;e++)r<s.length&&s.charAt(e)!=s.charAt(r)&&(t=!0),r++;if(!t)return!1;var e,n=s.substr(0,9),i=s.substr(9,2),o=0;for(e=0;e<9;e++)o+=n.charAt(e)*(10-e);if(0==o)return!1;if(o=11-o%11,o>9&&(o=0),i.charAt(0)!=o)return!1;for(o*=2,e=0;e<9;e++)o+=n.charAt(e)*(11-e);return o=11-o%11,o>9&&(o=0),i.charAt(1)==o},calculoDigitosCnpj=function(a){if(s=a,isNaN(s))return!1;var t,r=s.substr(0,12),e=s.substr(12,2),n=0;for(t=0;t<12;t++)n+=r.charAt(11-t)*(2+t%8);if(0==n)return!1;if(n=11-n%11,n>9&&(n=0),e.charAt(0)!=n)return!1;for(n*=2,t=0;t<12;t++)n+=r.charAt(11-t)*(2+(t+1)%8);return n=11-n%11,n>9&&(n=0),e.charAt(1)==n},campoVazio=function(a){return""===$(a).val()||null===$(a).val()?($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text($(a).attr("data-message-empty")),!1):($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text(""),!0)},nomeCompleto=function(a){var t=/([A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ]{2,}([ A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ'`.]{0,}?)[ ]{1,}([ A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ'`]{0,}?)[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ]{2,})/;return a.value.match(t)&&""!=a.value?($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text("Digite o nome completo"),!1)},data=function(a){var t=/^((((0?[1-9]|[12]\d|3[01])[\.\-\/](0?[13578]|1[02])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|[12]\d|30)[\.\-\/](0?[13456789]|1[012])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|1\d|2[0-8])[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|(29[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00)))|(((0[1-9]|[12]\d|3[01])(0[13578]|1[02])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|[12]\d|30)(0[13456789]|1[012])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|1\d|2[0-8])02((1[6-9]|[2-9]\d)?\d{2}))|(2902((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00))))$/;return a.value.match(t)&&""!=a.value?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("Data inválida"),!1)},cpf=function(a){var t=a.value.replace(/\D+/g,"");return calculaDigitosCpf(t)?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("CPF inválido"),!1)},cnpj=function(a){var t=a.value.replace(/\D+/g,"");return calculoDigitosCnpj(t)?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("CNPJ inválido"),!1)},cpfCnpj=function(a){var t=a.value.replace(/\D+/g,"");return 11==t.length?cpf(a):t.length>=14?cnpj(a):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("Documento inválido"),!1)},email=function(a){return $(a).val().match(/(?:[a-z0-9!#$%&'*+\=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)/gi)?($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("name")+'"]').text("E-mail inválido"),!1)},idadeMaximaPlano=function(a){var t=$(a).attr("id").replace(/[^\d]/g,""),r=parseInt($("#hdnIdadeMaximaPlano"+t).val())||0,e=(new Date).getFullYear()-(parseInt($(a).val().split("/")[2])||0),n=new Date($(a).val().split("/").reverse());return n.setHours(0,0,0,0),e>r||n>new Date?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("Idade superior a idade máxima do plano"),!1):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0)},idadeMinimaPlano=function(a){return(new Date).getFullYear()-(parseInt($(a).val().split("/")[2])||0)<0?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("Idade inferior a idade mínima do plano"),!1):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0)},viajanteDuplicado=function(a){var t=$(a).attr("id").replace(/\D/g,""),r=$("#Nome"+t).val();return $("#lista-viajantes").find("div[class*='viajante']").has("input[name*='Nome']:valueEquals("+r+")").has("input[name*='Cpf']:valueEquals("+$(a).val()+")").length>1?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text("Viajante duplicado"),!1):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0)},camposDiferentes=function(a){var t=$(a).attr("data-target-camposdiferentes");return $(a).val()===$(t).val()?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text($(a).attr("data-message-camposdiferentes")),!1):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0)},campoChecado=function(a){return $(a).is(":checked")?($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text(""),!0):($('span[data-valmsg-for="'+$(a).attr("id")+'"]').text($(a).attr("data-message-checked")),!1)},validaCampo=function(a,t){var r=!0,e=!0;return $(a).attr("valida").split(" ").map(function(t){if(e){var n=window[t];return"function"!=typeof n||n(a)?void 0:(r=!1,void(e=!1))}}),$((t||"")+" .valid:has(label.control-label span.control-label:not(:empty))").has(a).removeClass("has-success").addClass("has-error"),$((t||"")+" .valid:has(label.control-label span.control-label:empty)").has(a).removeClass("has-error").addClass("has-success"),r},validaFormulario=function(a){var t=!0,r=void 0;return r=a+" [valida]",$(r).each(function(r,e){validaCampo(e,a)||(t=!1)}),t},validacao=function(a,t){t=t||{};var r="botao"in t?$(t.botao):$(a+' button[type="submit"]'),e="submit"===r.attr("type")?$(a):r,n="submit"===r.attr("type")?"submit":"click";$(a).on("blur keyup change",':input[valida]:not(:button), :input[data-toggle="dropdown"]',function(t){var r=t.target;"dropdown"==$(r).attr("data-toggle")&&(r="#"+$(r).attr("data-id")),validaCampo(r,a)}),e.on(n,function(e){r.button("loading"),validaFormulario(a)?"submit"in t&&t.submit(e):("invalido"in t&&t.invalido(e),e.preventDefault(),r.button("reset"))})};
populaCidades=function(e,o,a,t){$(o).empty(),$(o).removeAttr("disabled");var r=$(e).val().substr(0,2),n="//"+a+"/www/json/cidades/"+r+".json";$.getJSON(n,function(e){var a=e[r];$.each(a,function(e,a){return o.append($("<option />").val(a).text(a))}),""!=t&&$(o).val(t),$(".selectpicker").selectpicker("refresh"),$(o).trigger("blur")})},consultaCep=function(e,o,a){var t="https://api.cenarioconsulta.com.br/consulta/v1/logradouro/"+a+"/NomeLogradouro%2CComplemento%2CBairro%2CCodigoUFEstado%2CSigla%2CCodigoIbge%2CNomeCidade";$.ajax({url:t,beforeSend:function(e){return e.setRequestHeader("authorization","Token bb55465t-4545-4f9e-80b6-339ae9507c8b1586889999")}}).done(function(a){var t=$("#Endereco"),r=$("#Bairro");$(t).val(""),$(r).val(""),$(o).empty(),$(t).val(a.nome),$(r).val(a.bairro),$(e).val(a.estado.codigoUf+a.estado.sigla),populaCidades(e,o,window.location.host,a.cidade.nome),$("#Endereco, #Bairro").trigger("blur"),$(e).trigger("blur")})},calculaValorTotal=function(){var e=0,o=parseFloat($("#spValor").text()?$("#spValor").text():"0"),a=parseFloat($("#spDescontoBoleto").text()?$("#spDescontoBoleto").text():"0");e=o-(a+parseFloat($("#spDescontoCupom").text()?$("#spDescontoCupom").text():"0")),$("#spTotal").text(e.toFixed(2)),$("#hdValorDesconto").val(a)},resumoPedido=function(){getSession("carrinho")&&(objCarrinho=getParseSession("carrinho"),$("#hdnCarrinho").val(getSession("carrinho")),objCarrinho.map(function(e){valorPedido+=e.ValorTotal;var o=isMobile(navigator.userAgent)?document.querySelector("#ResumoPedidoMobile"):document.querySelector("#ResumoPedido");$(o).empty(),$(o).append($("#ResumoPedidoConteudo").clone(!1).html()),$(o).find("#imgOperadora").prop("alt",e.Planos.Operadora.Nome+" - Seguro Viagem").prop("title",e.Planos.Operadora.Nome+" - Seguro Viagem").prop("src","../www/img/operadoras/"+e.Planos.Operadora.ImagemLogo),$(o).find("#nomePlano").text(e.Planos.Nome),$(o).find("#destino").text(e.Planos.Destino.Nome),$(o).find("#dataIda").text(e.DataIda),$(o).find("#dataVolta").text(e.DataVolta);var a=e.Planos.Coberturas[0].MoedaCobertura?e.Planos.Coberturas[0].MoedaCobertura+" "+parseFloat(e.Planos.Coberturas[0].ValorCobertura).toFixed(2):"-",t=e.Planos.Coberturas[1]?e.Planos.Coberturas[1].MoedaCobertura+" "+parseFloat(e.Planos.Coberturas[1].ValorCobertura).toFixed(2):"-";$(o).find("#assistenciaMedica").text(a),$(o).find("#perdaBagagem").text(t),$(o).find("#btnViajantes").val(e.Planos.IdPlano).text(e.QuantidadeViajantes+" "+(1==e.QuantidadeViajantes?"viajante":"viajantes")+" - Visualizar")}),$("#spValor").text(valorPedido.toFixed(2)),calculaValorTotal())},selecionaTemplatePagamento=function(e){if(void 0!=e){var o=document.querySelector("#OperadoraPagamentoCampos");if($(o).empty(),$(o).append($(e).clone(!1).html()),$(".selectpicker").selectpicker(),isMobile(navigator.userAgent)&&$(".selectpicker").selectpicker("mobile"),$('input[mask-cartao-credito="true"]').mask("0000 0000 0000 0099",{reverse:!0}),$('input[mask-ano-validade="true"]').mask("00/0099"),$('input[mask-codigo-seguranca="true"]').mask("000"),addEventCardCredit(),$("#Parcelas").change(function(){return calculaParcelasPagamento()}),"#RedeCard"==e){var a=document.querySelector("#divCartao");$(a).empty(),$(a).append($("#RedeCardCartao").clone(!1).html())}else{var t=document.querySelector("#divCartao");$(t).empty()}}},defineTemplatePagamento=function(e){if(""!=e){var o="3"==e?"#RedeCard":"#Itau";if("#Itau"==o){var a=.05*valorPedido,t=parseFloat($("#hdnDescontoCupom").val())||0;$("#hdnDescontoTotal").val((a+t).toFixed(2)),$("#hdnDescontoBoleto").val(a.toFixed(2)),$("#spDescontoBoleto").text(a.toFixed(2)),$("#descontoBoleto").removeClass("hidden"),$("#cartaoCredito").addClass("hidden")}else{var r=parseFloat($("#hdnDescontoCupom").val())||0;$("#hdnDescontoTotal").val((r+0).toFixed(2)),$("#descontoBoleto").addClass("hidden"),$("#hdnDescontoBoleto").val("0"),$("#spDescontoBoleto").text("")}selecionaTemplatePagamento(o),calculaValorTotal()}},calculaParcelasPagamento=function(){if("3"==$("#OperadoraPagamento").val()){var e=$("#Parcelas").val(),o=parseFloat($("#spTotal").text());if(""!=e)switch(e){case"00":$("#cartaoCredito").text("Pagamento no cartão de crédito à vista"),$("#cartaoCredito").removeClass("hidden");break;default:var a=parseInt(e),t=o/a;$("#cartaoCredito").html("Pagamento no cartão de crédito em "+a+"x de <a style='color: #3d5afe;'>R$ "+t.toFixed(2)+"</a>"),$("#cartaoCredito").removeClass("hidden")}}},removeCupom=function(){var e=0,o=parseFloat($("#spDescontoBoleto").text())?.05:0,a=0!=o?valorPedido*o:0;e=valorPedido-valorPedido*o,$("#hdnDescontoBoleto").val((valorPedido*o).toFixed(2)),$("#spDescontoBoleto").text((valorPedido*o).toFixed(2)),$("#hdnDescontoCupom").val("0.00"),$("#hdnDescontoTotal").val(a.toFixed(2)),$("#spDescontoCupom").text(""),$("#descontoCupom").addClass("hidden"),$("#spTotal").text(e.toFixed(2)),$("#hdnCupom").val("")},verificaPlanoEstudante=function(){var e=JSON.parse(window.sessionStorage.getItem("carrinho")),o=e[0].Planos.Estudante;$("[name=Estudante]").val(o),o||($("[name=Estudante]").removeAttr("valida"),$(".estudanteJs").toggleClass("hidden"))};